<Dashboard>:
    orientation: "vertical"
    padding: 10
    spacing: 10

    # ================= TOP BAR =================
    BoxLayout:
        size_hint_y: 0.1
        spacing: 10

        Button:
            text: "EXIT"
            size_hint_x: 0.15
            background_color: (0.8, 0.1, 0.1, 1)
            on_press: app.on_exit_btn()

        Label:
            text: "SOIL MONITOR DASHBOARD"
            font_size: "24sp"
            bold: True

        Label:
            text: "Battery: {}%".format(root.battery)
            size_hint_x: 0.2
            color: (1,0,0,1) if root.battery < 30 else (1,1,0,1) if root.battery < 60 else (0,1,0,1)

    # ================= VALUE GRID =================
    GridLayout:
        cols: 4
        spacing: 0
        size_hint_y: 0.7
        padding: 0

        # Temperature
        BoxLayout:
            orientation: "vertical"
            padding: 10
            spacing: 5
            canvas:
                Color:
                    rgba: (0.2, 0.2, 0.2, 1)
                Line:
                    rectangle: (self.x, self.y, self.width, self.height)
                    width: 2
            Label:
                text: "Temperature"
                size_hint_y: 0.4
            Label:
                text: str(root.temp_val)
                font_size: "32sp"
                bold: True
                size_hint_y: 0.6

        # Moisture
        BoxLayout:
            orientation: "vertical"
            padding: 10
            spacing: 5
            canvas:
                Color:
                    rgba: (0.2, 0.2, 0.2, 1)
                Line:
                    rectangle: (self.x, self.y, self.width, self.height)
                    width: 2
            Label:
                text: "Moisture"
                size_hint_y: 0.4
            Label:
                text: str(root.moisture_val)
                font_size: "32sp"
                bold: True
                size_hint_y: 0.6

        # Nitrogen
        BoxLayout:
            orientation: "vertical"
            padding: 10
            spacing: 5
            canvas:
                Color:
                    rgba: (0.2, 0.2, 0.2, 1)
                Line:
                    rectangle: (self.x, self.y, self.width, self.height)
                    width: 2
            Label:
                text: "Nitrogen"
                size_hint_y: 0.4
            Label:
                text: str(root.n_val)
                font_size: "32sp"
                bold: True
                size_hint_y: 0.6

        # Phosphorus
        BoxLayout:
            orientation: "vertical"
            padding: 10
            spacing: 5
            canvas:
                Color:
                    rgba: (0.2, 0.2, 0.2, 1)
                Line:
                    rectangle: (self.x, self.y, self.width, self.height)
                    width: 2
            Label:
                text: "Phosphorus"
                size_hint_y: 0.4
            Label:
                text: str(root.p_val)
                font_size: "32sp"
                bold: True
                size_hint_y: 0.6

        # Potassium
        BoxLayout:
            orientation: "vertical"
            padding: 10
            spacing: 5
            canvas:
                Color:
                    rgba: (0.2, 0.2, 0.2, 1)
                Line:
                    rectangle: (self.x, self.y, self.width, self.height)
                    width: 2
            Label:
                text: "Potassium"
                size_hint_y: 0.4
            Label:
                text: str(root.k_val)
                font_size: "32sp"
                bold: True
                size_hint_y: 0.6

        # Salinity
        BoxLayout:
            orientation: "vertical"
            padding: 10
            spacing: 5
            canvas:
                Color:
                    rgba: (0.2, 0.2, 0.2, 1)
                Line:
                    rectangle: (self.x, self.y, self.width, self.height)
                    width: 2
            Label:
                text: "Salinity"
                size_hint_y: 0.4
            Label:
                text: str(root.salinity_val)
                font_size: "32sp"
                bold: True
                size_hint_y: 0.6

        # EC
        BoxLayout:
            orientation: "vertical"
            padding: 10
            spacing: 5
            canvas:
                Color:
                    rgba: (0.2, 0.2, 0.2, 1)
                Line:
                    rectangle: (self.x, self.y, self.width, self.height)
                    width: 2
            Label:
                text: "EC"
                size_hint_y: 0.4
            Label:
                text: str(root.ec_val)
                font_size: "32sp"
                bold: True
                size_hint_y: 0.6

        # pH
        BoxLayout:
            orientation: "vertical"
            padding: 10
            spacing: 5
            canvas:
                Color:
                    rgba: (0.2, 0.2, 0.2, 1)
                Line:
                    rectangle: (self.x, self.y, self.width, self.height)
                    width: 2
            Label:
                text: "pH"
                size_hint_y: 0.4
            Label:
                text: str(root.ph_val)
                font_size: "32sp"
                bold: True
                size_hint_y: 0.6

    # ================= ACTUATOR BUTTON =================
    BoxLayout:
        size_hint_y: 0.15

        Button:
            text: "ACTUATOR: ON" if root.actuator_on else "ACTUATOR: OFF"
            font_size: "20sp"
            background_color: (0.1, 0.7, 0.2, 1) if root.actuator_on else (0.3, 0.3, 0.3, 1)
            on_press: root.activate_actuator()


# Root layout
BoxLayout:
    orientation: "vertical"

    Dashboard:
        id: dashboard
